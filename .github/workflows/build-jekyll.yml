# .github/workflows/deploy.yml

name: Deploy to GitHub Pages

# Run on pushes to the main branch and allow manual runs
on:
  push:
    branches: [ "main" ] # Or 'master' if that's your default branch
  workflow_dispatch: # Allows you to run this workflow manually from the Actions tab

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read       # To check out the repository
  pages: write        # To deploy to Pages
  id-token: write     # To authenticate with OIDC

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Build job (optional, if you need build steps like npm run build, jekyll build, etc.)
  # If your site is pure HTML/CSS/JS and needs no building, you can remove this job
  # and adjust the 'deploy' job below to checkout code directly.
  # For now, let's assume NO build step is needed for a standard username.github.io repo.
  # If you DO need a build step, uncomment and adapt the 'build' job below.
  
  # build:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Checkout
  #       uses: actions/checkout@v4
  #     # Add your build steps here, e.g.:
  #     # - name: Set up Node.js
  #     #   uses: actions/setup-node@v4
  #     #   with:
  #     #     node-version: '20' # Specify your Node.js version
  #     #     cache: 'npm' # Or 'yarn'
  #     # - name: Install dependencies
  #     #   run: npm ci # Or yarn install --frozen-lockfile
  #     # - name: Build static site
  #     #   run: npm run build # Or your build command
  #     - name: Setup Pages
  #       uses: actions/configure-pages@v5
  #     - name: Upload artifact
  #       uses: actions/upload-pages-artifact@v3
  #       with:
  #         # Upload the directory containing your built site files
  #         # Common examples: './dist', './build', './_site', '.' (if no build step)
  #         path: '.' # Adjust this if you have a build step putting files elsewhere

  # Deployment job
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }} # The URL will be shown in the workflow logs
    runs-on: ubuntu-latest
    # If you added the 'build' job above, uncomment the 'needs: build' line
    # needs: build 
    steps:
      # If you DON'T have a build job, you need checkout and upload steps here:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Pages
        uses: actions/configure-pages@v5
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # Upload the root directory ('./') since username.github.io serves from root
          path: '.' 
          
      # The deploy step itself:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4 
        # No 'with' section needed here; it automatically picks up the artifact